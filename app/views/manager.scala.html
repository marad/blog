@()(implicit request: RequestHeader, flash: Flash)

@import views.html.pages.page

@page("Post Manager") {
    <script src="@routes.Assets.at("pages/manager.js")" type="text/javascript"></script>
    <style>
    table {
      width: 100%;
    }

    th, td {
      padding: 10px;
    }

    th.title, th.published { text-align: left; }
    td.id, td.actions { text-align: center; }

    .page-info .pure-paginator .pure-button {
      font-size: 12px;
      height: inherit;
    }

    </style>
    <div ng-app="app">
        <div ng-controller="ManagerCtl">
            <table>
              <col width="50px"/>
              <col/>
              <col width="40px"/>
              <col width="150px"/>
            <thead>
                <tr>
                    <th class="id">Id</th>
                    <th class="title">Title</th>
                    <th class="published">Published</th>
                    <th class="actions">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="post in posts">
                  <td class="id">{{post.id}}</td>
                  <td class="title">
                    <a href="/post/view/{{post.id}}">
                      {{post.title}}
                    </a>
                  </td>
                  <td class="published">{{post.published}}</td>
                  <td class="actions">
                    <a href="/post/edit/{{post.id}}">Edit</a>
                    <a href="/post/delete/{{post.id}}" 
                      onclick="return confirm('Are you sure you want to delete this post?')">
                      Delete
                    </a>
                  </td>
                </tr>
            </tbody>
            </table>

            <div class="page-info center">
              <ul class="pure-paginator">
                <li><button class="pure-button prev" ng-click="getPage(currentPage-1)">&#171;</button></li>
                <li ng-repeat="i in times(pageCount)">
                  <button 
                    class="pure-button" 
                    ng-click="getPage($index+1)"
                    ng-class="{'pure-button-active': ($index+1) == currentPage}">
                    {{ $index + 1 }}
                  </button>
                </li>
                <li><button class="pure-button next" ng-click="getPage(currentPage+1)">&#187;</button></li>
              </ul>
            </div>

        </div>
    </div>
}
